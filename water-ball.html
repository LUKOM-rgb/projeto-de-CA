<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Water Fill Animation 2.0</title>
    <style>
        body {
            background: linear-gradient(180deg, #e0f7ff, #ffffff);
            font-family: "Poppins", Arial, sans-serif;
            color: #004d99;
            margin: 0;
            padding: 0;
        }

        canvas {
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0,0,0,0.1);
            display: block;
            margin: 20px auto;
            background: #fdfdfd;
        }

        .controls {
            text-align: center;
            margin: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 0 8px;
            cursor: pointer;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            transition: all 0.2s ease;
        }

        button.shape {
            background-color: #4CAF50;
            color: white;
        }

        button.shape.active {
            background-color: #2e7d32;
            box-shadow: 0 0 6px rgba(0,0,0,0.3);
        }

        button.action {
            background-color: #007BFF;
            color: white;
        }

        button.action:hover {
            background-color: #0066cc;
        }

        #waterInfo {
            text-align: center;
            font-size: 18px;
            margin: 10px;
            font-weight: 500;
        }

        .notes {
            text-align: center;
            margin: 20px auto;
            max-width: 650px;
            padding: 15px;
            background-color: #f0f8ff;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .notes h3 {
            color: #003366;
            margin-bottom: 10px;
        }

        .notes p {
            color: #333;
            margin: 6px 0;
            font-size: 15px;
        }

        .capacity-info {
            font-weight: bold;
            color: #0066cc;
        }
    </style>
</head>
<body>
    <div class="notes">
        <h3>üíß Instru√ß√µes</h3>
        <p>1Ô∏è‚É£ Escolhe a forma: Bola ou Cal√ßas</p>
        <p>2Ô∏è‚É£ Clica na forma para come√ßar a ench√™-la com √°gua</p>
        <p>3Ô∏è‚É£ Usa o bot√£o "Esvaziar" para recome√ßar</p>
        <div class="capacity-info">
            <p>Capacidades:</p>
            <p>üîµ Bola ‚Üí 3000 L</p>
            <p>üëñ Cal√ßas ‚Üí 10000 L</p>
        </div>
    </div>

    <div class="controls">
        <button id="ballButton" class="shape active">Bola</button>
        <button id="pantsButton" class="shape">Cal√ßas</button>
        <button id="emptyButton" class="action">Esvaziar</button>
    </div>

    <div id="waterInfo">0.0 L / 3000 L</div>
    <canvas id="ballCanvas" width="400" height="400"></canvas>

    <script>
        const canvas = document.getElementById('ballCanvas');
        const ctx = canvas.getContext('2d');

        const centerX = canvas.width / 2;
        const centerY = canvas.height / 2;
        const radius = 90;

        const capacities = { ball: 3000, pants: 10000 };
        const fillSpeed = 0.8;
        let waterLevel = 0;
        let targetWaterLevel = 0;
        let currentShape = 'ball';
        const maxWaterLevel = radius * 2;

        const ballBtn = document.getElementById('ballButton');
        const pantsBtn = document.getElementById('pantsButton');
        const emptyBtn = document.getElementById('emptyButton');
        const info = document.getElementById('waterInfo');

        function drawPants() {
            ctx.beginPath();
            ctx.moveTo(centerX - radius, centerY - radius);
            ctx.lineTo(centerX + radius, centerY - radius);
            ctx.lineTo(centerX + radius, centerY + radius);
            ctx.lineTo(centerX, centerY);
            ctx.lineTo(centerX - radius, centerY + radius);
            ctx.closePath();
            ctx.strokeStyle = '#000';
            ctx.lineWidth = 2;
            ctx.stroke();
        }

        function drawBallOrPants() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // desenha a forma
            if (currentShape === 'ball') {
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                ctx.strokeStyle = '#000';
                ctx.lineWidth = 2;
                ctx.stroke();
            } else {
                drawPants();
            }

            // desenha a √°gua
            if (waterLevel > 0) {
                ctx.save();
                if (currentShape === 'ball') {
                    ctx.beginPath();
                    ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
                    ctx.clip();
                } else {
                    ctx.beginPath();
                    ctx.moveTo(centerX - radius, centerY - radius);
                    ctx.lineTo(centerX + radius, centerY - radius);
                    ctx.lineTo(centerX + radius, centerY + radius);
                    ctx.lineTo(centerX, centerY);
                    ctx.lineTo(centerX - radius, centerY + radius);
                    ctx.closePath();
                    ctx.clip();
                }

                const waterHeight = (waterLevel / maxWaterLevel) * (radius * 2);
                const waterY = centerY + radius - waterHeight;

                const gradient = ctx.createLinearGradient(0, centerY - radius, 0, centerY + radius);
                gradient.addColorStop(0, 'rgba(0, 170, 255, 0.5)');
                gradient.addColorStop(1, 'rgba(0, 100, 255, 0.7)');

                // desenha √°gua com onda
                ctx.beginPath();
                for (let x = centerX - radius; x <= centerX + radius; x += 2) {
                    const wave = Math.sin((x + Date.now() / 120) / 10) * 3;
                    ctx.lineTo(x, waterY + wave);
                }
                ctx.lineTo(centerX + radius, centerY + radius);
                ctx.lineTo(centerX - radius, centerY + radius);
                ctx.closePath();

                ctx.fillStyle = gradient;
                ctx.fill();
                ctx.restore();
            }

            if (waterLevel < targetWaterLevel) {
                waterLevel = Math.min(waterLevel + fillSpeed, targetWaterLevel);
            } else if (waterLevel > targetWaterLevel) {
                waterLevel = Math.max(waterLevel - fillSpeed, targetWaterLevel);
            }

            const currentLiters = (waterLevel / maxWaterLevel) * capacities[currentShape];
            info.textContent = `${currentLiters.toFixed(1)} L / ${capacities[currentShape]} L`;
        }

        function animate() {
            drawBallOrPants();
            requestAnimationFrame(animate);
        }

        // clique no canvas
        canvas.addEventListener('click', e => {
            const rect = canvas.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            if (currentShape === 'ball') {
                const d = Math.hypot(x - centerX, y - centerY);
                if (d <= radius) targetWaterLevel = maxWaterLevel;
            } else {
                ctx.beginPath();
                drawPants();
                if (ctx.isPointInPath(x, y)) targetWaterLevel = maxWaterLevel;
            }
        });

        // Bot√µes
        ballBtn.onclick = () => {
            currentShape = 'ball';
            waterLevel = 0;
            targetWaterLevel = 0;
            ballBtn.classList.add('active');
            pantsBtn.classList.remove('active');
            info.textContent = `0.0 L / ${capacities.ball} L`;
        };

        pantsBtn.onclick = () => {
            currentShape = 'pants';
            waterLevel = 0;
            targetWaterLevel = 0;
            pantsBtn.classList.add('active');
            ballBtn.classList.remove('active');
            info.textContent = `0.0 L / ${capacities.pants} L`;
        };

        emptyBtn.onclick = () => {
            targetWaterLevel = 0;
        };

        animate();
    </script>
</body>
</html>
